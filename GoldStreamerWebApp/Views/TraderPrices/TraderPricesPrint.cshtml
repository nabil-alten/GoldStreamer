@model List<GoldStreamer.Models.ViewModels.TraderPricesPrintVM>
@{
    Layout = "~/Views/Shared/_LayoutInner.cshtml";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>TraderPricesPrint</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @Scripts.Render("~/bundles/toast")
    <script src="~/Scripts/jquery-1.11.1.min.js"></script>

</head>
<body>
@using (Html.BeginForm("GeneratePDF", "ExportToPDF", FormMethod.Get))
{
    <div>
        <table class="data_table" id="list">
            <tr>
                <td colspan="3" style="align-content: center">
                    <div align="center" style="font-size: large"> @Resources.General.PriceList</div>
                </td>
            </tr>
            <tr>
                <td colspan="3" style="align-content: center">
                    <div align="center" style="font-size: large"> @Model[0].Date</div>

                </td>
            </tr>
            <tr>

                <td colspan="2">
                    <div align="right" style="font-size: large"> @Model[0].TraderName</div>

                </td>
                <td>
                    <div align="center" style="font-size: large"> @Resources.General.TraderName</div>
                </td>
            </tr>

            <tr>
                <td colspan="3">
                    <div id="bestP">
                        @{Html.RenderAction("_BestPrice");}
                    </div>
                </td>
            </tr>
            @if (Model.Count() == 0)
            {
                <tr>
                    <td colspan="3">
                        @Html.Label("lblMSGsearch", Resources.Messages.NoData)
                    </td>
                </tr>

            }

            else
            {
                <tr>
                    <th>
                        @Html.Label(@Resources.General.BuyPrice)
                    </th>
                    <th>
                        @Html.Label(@Resources.General.SellPrice)
                    </th>
                    <th>
                        @Html.Label(@Resources.General.PriceDate)

                    </th>

                </tr>

                foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @String.Format("{0:0,0.00}", item.BuyPrice)
                            @Html.HiddenFor(m => item.BuyPrice)
                        </td>
                        <td>
                            @String.Format("{0:0,0.00}", item.SellPrice)
                            @Html.HiddenFor(m => item.SellPrice)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.priceDate)
                            @Html.HiddenFor(m => item.Date)
                        </td>

                    </tr>
                }
                <tr>
                    <td colspan="3">
                        <a href="javascript:window.print()">@Resources.General.Print</a>
                        <input id="PrintPreview1" type="submit" value='@Resources.General.Print' class="btn" />
                    </td>
                </tr>

            }
        </table>

    </div>
}
    @*<script>
        $(document).ready(function () {

            $('#PrintPreview1').on('click', function (e) {

                $.ajax({
                    url: "@(baseUrl)/TraderPrices/GeneratePDF",
                    type: 'Get',
                    async: false,
                    cache: false,
                    contentType: "application/json; charset=utf-8",
                    data: { model: $('body').serialize() },
                    success: function (data) {
                        debugger;
                        //$('body').html(data);
                        //$('#jqOpenDate').jqxDateTimeInput({ value: new Date(yy, mm - 1, dd) });
                    },
                    error: function (xhr, textStatus) {
                        toastr.error('Error!');
                    }
                });
                return false;
            });
        });
    </script>*@
    @Scripts.Render("~/bundles/jqueryval")

</body>
<footer>
    تاريخ الطباعة: @DateTime.Now
</footer>
</html>
