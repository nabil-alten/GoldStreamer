@using GoldStreamer.Helpers
@{
    ViewBag.Title = Resources.General.PriceFavTitle;
    Layout = "~/Views/Shared/_LayoutInner.cshtml";


    string baseUrl = CultureHelper.GetBaseURL().ToLower();
}
        <h1 style="margin-bottom:20px;">@Resources.General.ShowFavPrices</h1>

    <table>
        <tr>
            <td>
                @Html.ActionLink(@Resources.General.GoToMainPriceList, "Index")
            </td>

        </tr>
    </table>
<div id="pricesTable">
</div>
    
    @section Scripts{
        <script src="~/Scripts/jquery.signalR-2.2.0.js"></script>
        <!--Reference the autogenerated SignalR hub script. -->
        @* ReSharper disable once Html.PathError *@
        <script src="/signalr/hubs"></script>
        <script type="text/javascript">
            $(function () {

                // Declare a proxy to reference the hub.
                var priceViewer = $.connection.priceViewerHub;

                // Create a function that the hub can call to broadcast messages.
                priceViewer.client.updatePrices = function () {
                    getAllPrices();
                };
                // Start the connection.

                //$.connection.hub.logging = true;
                $.connection.hub.start().done(function () {
                    getAllPrices();
                }).fail(function (e) {
                });
            });


            function getAllPrices() {
                var tbl = $('#pricesTable');
                $.ajax({
                    url: '@(baseUrl)/' + '/Pricer/GetPricesFav',
                    contentType: 'application/html ; charset:utf-8',
                    type: 'GET',
                    dataType: 'html'
                }).success(function (result) {
                    tbl.empty().append(result);
                }).error(function () {

                });
            }
        </script>
    }
@if (GoldStreamer.Helpers.UserNavigation.IsSuperTrader())
{
    @section SideMenu{
        @Html.Partial("_SuperTraderMenu")
    }
}
else if (GoldStreamer.Helpers.UserNavigation.IsTrader())
{
    @section SideMenu{
        @Html.Partial("_TraderSideMenu")
    }
}
@section UpperBanner{


    <div class="innerBanner">
        <h1 class="banner_header">@Resources.General.PriceFavTitle</h1>

        <div class="banner"><img src="../../Content/Images/inner_banner.jpg" width="1050" height="180" alt="" /></div>
    </div>
}
<script>
    $(function () {
        $("#div_PricesOffers").addClass("menuItemactive");
        $("#div_pricesOffers").addClass("menuItemactive");


    });
</script>